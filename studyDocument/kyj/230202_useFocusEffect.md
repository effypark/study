# react-native

## 1. useFocusEffect vs useEffect
useFocusEffect가 호출될 때 하는 역할은 인자로 받아들이는 값을 화면의 "focus" 이벤트가 발생할 때 호출을 하도록 설계되어 있습니다.

사실상 focus가 되는 순간 특정 함수가 호출이 되는 것은 동일하므로, 실행되야 하는 함수를 굳이 재평가 할 필요가 없도록 useCallback에 전달하여 React 앱의 전역 환경에 고정시키는 것은 합리적인 절차라고 보여지지만 주의할 점이 있습니다.

useFocusEffect는 기본적으로 스크린이 포커싱이 되었을 때만 실행되는 것이 맞지만, useCallback의 디펜던시가 감지하는 내용의 변동으로 인해 내부 지역 상태가 바뀔 경우 역시 호출된다는 점을 정말 주의해야 합니다.

공식 문서에서도 useFocusEffect를 사용하기 가장 좋은 부분은 데이터를 서버로부터 패칭을 받는 행위 라고 소개하고 있습니다.

그런데, 여기서 useFocusEffect의 특징은 스크린이 "focus"가 되었던 순간에 호출이 된다는 점이지, "리랜더링이 되는 순간" 호출이 되는 것은 아니라는 점인데,

만약 리랜더링을 포함하여 스크린이 포커싱 되는 순간 모든 변경점이 반영 된 특정한 결과를 랜더링을 진행하고 싶다면 "useEffect"를 사용하는 것이 좋고,

만약 스크린이 포커싱이 되는 그 순한 단 한번을 주목하여 필요한 로직, 예를 들어 데이터 패칭과 같은 행위를 한번만 하도록 하고 리 랜더링 마다 실행하고 싶지 않다면 useFocusEffect를 사용하는 편이 좋습니다.

## 1. useFocusEffect & useCallback
useFocusEffect는 꼭 useCallback과 같이 사용해야 합니다. 만약 useFocusEffect을 사용하지 않으면 컴포넌트가 리렌더링 될 때마다 useFocusEffect에 등록한 함수가 호출 될 것입니다.

useCallback은 컴포넌트 내부에서 함수를 만들 때, 새로 만든 함수를 사용하지 않고 이전에 만든 함수를 다시 사용하도록 만들어주며, 그 함수 내부의 로직에서 의존하는 값이 있다면 의존하는 값이 바뀌었을 때 함수를 교체할 수 있도록 해줍니다.