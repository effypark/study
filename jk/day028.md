# 컴포넌트 2

## 컴포넌트 결합

### ADP 의존성 비순환 원칙

컴포넌트 의존성 그래프에 순환이 있어서는 안된다

A -> B, A -> B, B->D, D-> C, C -> B

위와같이 의존성 관계가 순환구조로 되어있으면,  
D컴포넌트의 수정과 릴리즈를 위해 B, C컴포넌트까지   
함께 호환을 함께 살펴봐야하는, 이른바 ‘숙취증후군'을 경험함.   
이처럼 순환이 생기면 하나의 단위테스트를 하고 릴리즈  
하는일이 굉장히 어려워질 뿐 아니라 어떤 순서로  
빌드해야 올바를지를 파악하기가 어려워짐.  
순환이 생기면 올바른 순서라는 것 자체가 없을 수 있기 때문.

이와 같은 순환 의존성을 끊기 위한 방법은 두가지.  
첫번째로는 의존성 역전 원칙(DIP)를 적용하는 것.   
예를 들어 컴포넌트가 의존하고 있는 C컴포넌트의   
인터페이스를 D컴포넌트에 위치시키고, C컴포넌트은   
그 인터페이스를 상속받을 수 있도록 하여 순환구조를  
끊어버리는 것.

두 번째 방법으로는 새로운 컴포넌트를 만들어 C와  
D컴포넌트가 의존하는 클래스들을 새로운 컴포넌트로  
이동시키는 것. 이 말은 컴포넌트 구조도 변경될 수  
있다는 점을 시사하는데, 실제로 어플리케이션이  
성장함에 따라 컴포넌트 의존성 구조도 흐트러지며  
성장하므로, 의존성 구조에 순환이 발생하는지  
항상 관찰해야 함.


