# 33장 사례 연구

### 제품

시스템의 초기 아키텍처를 결정하는 첫 단계는 액터와 유스케이스를 식별하는 일이다.

### 유스케이스 분석

단일 책임 원칙에 따르면 이들 네 액터가 시스템이 변경되어야   
할 네 가지 주요 근원이 된다.  
신규 기능을 추가하거나 기존 기능을 변경해야 한다면,  
그 이유는 반드시 이들 액터 중 하나에게 해당 기능을 제공하기 위해서다.   
따라서 우리는 시스템을 분할하여,  
특정 액터를 위한 변경이 나머지 액터에게는  
전혀 영향을 미치지 않게 만들고자 한다.

네 액터 : 제작자, 관리자, 구매자, 시청자

추상 유스케이스는 범용적인 정책을 담고 있으며,   
다른 유스케이스에서 이를 더 구체화한다.  
한편 이 추상화를 꼭 생성해야만 했던 건 아니다.

 
### 컴포넌트 아키텍처

이제 액터와 유스케이스를 식별했으므로,   
예비 단계의 컴포넌트 아키텍처를 만들어 볼 수 있다.   
뷰, 프레젠터, 인터랙터, 컨트롤러로 분리된 전형적인  
분할 방법을 확인할 수 있다.   
또한 대응하는 액터에 따라 카테고리를 분리했다는  
사실도 확인할 수 있다.  
각 컴포넌트는 단일 .dll 파일에 해당한다.   
이들 컴포넌트 각각은 자신에게 할당된   
뷰, 프레젠터, 인터랙터, 컨트롤러를 포함한다.

### 의존성 관리

입력이 컨트롤러에서 발생하면 인터랙터에 의해  
처리되어 결과가 만들어진다.  
그런 후 프레젠터가 결과의 포맷을 변경하고,  
뷰가 화면에 표시한다. 모든 의존성은 경계성을 한 방향으로만 가로지르는데,  
항상 더 높은 수준의 정책을 포함하는 컴포넌트를 향한다.  
또 하나, 사용 관계는 제어흐름과 같은 방향을 가리키며,  
상속 관계는 제어흐름과는 반대 방향을 가리킴에 주목하자.  
이는 개방 폐쇄 원칙을 적용했음을 보여준다.   
저수준의 세부사항에서 발생한 변경이 상위로 파급되어서   
상위 수준의 정책에 영향을 미치지는 않음을 보장할 수 있다.

### 결론

하나는 단일 책임 원칙에 기반한 액터의 분리이며,   
두 번째는 의존성 규칙이다.  
이 두 차원은 모두 서로 다른 이유로,   
서로 다른 속도로 변경되는 컴포넌트를 분리하는 데 그 목적이 있다.   
서로 다른 이유라는 것은 액터와 관련이 있으며,  
서로 다른 속도라는 것은 정책 수준과 관련이 있다.

상황에 맞게 컴포넌트들을 배포 가능한 단위로 묶을 수도 있고,  
상황이 변하면 변한 상황에 맞춰 묶는 단위를 바꾸기도 쉬워진다.
